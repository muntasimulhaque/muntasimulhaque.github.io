<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Personal site of Muntasim Ul Haque.">
    <meta name="robots" content="index, follow">
    <meta name="google-site-verification" content="UYjXZMa9J9gswoWCA2s4Y6R7bYg0VSPBKLaUyXrQwEg" />
    <meta name="theme-color" content="#333333">
    <title>{% if page.title and page.title != site.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
    <link rel="preload" href="{{ '/assets/css/main.css' | relative_url }}" as="style">
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
</head>
<body>
    <header>
        <nav id="main-nav" aria-label="Main Navigation">
    <ul>
        <li><a href="{{ '/' | relative_url }}" 
               {% if page.url == '/' %}aria-current="page"{% endif %}>Home</a></li>
        <li><a href="{{ '/publications' | relative_url }}" 
               {% if page.url contains '/publications' %}aria-current="page"{% endif %}>Publications</a></li>
        <li><a href="{{ '/cv' | relative_url }}" 
               {% if page.url contains '/cv' %}aria-current="page"{% endif %}>CV</a></li>
        <li><a href="{{ '/blog' | relative_url }}" 
               {% if page.url contains '/blog' %}aria-current="page"{% endif %}>Blogs</a></li>
        <li>
            <button class="theme-toggle" aria-label="Toggle dark mode">ðŸŒ“</button>
        </li>
    </ul>
</nav>
    </header>

    <main id="main-content" tabindex="-1">
        <article>
            {{ content }}
        </article>
    </main>

    <footer>
        <p>Â© Muntasim Ul Haque. Fork on <a href="https://github.com/muntasimulhaque/muntasimulhaque.github.io" target="_blank">GitHub</a>.</p>
    </footer>
	
	<script>
    document.addEventListener('DOMContentLoaded', function() {
        const themeToggle = document.getElementById('theme-toggle');
        console.log('Theme toggle button:', themeToggle); // For debugging

        // Check for saved theme preference, otherwise use system preference
        const getPreferredTheme = () => {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                return savedTheme;
            }
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        };

        // Function to set theme
        const setTheme = (theme) => {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            console.log('Theme set to:', theme); // For debugging
        };

        // Apply initial theme
        setTheme(getPreferredTheme());

        // Add click event listener to toggle button
        if (themeToggle) {
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                setTheme(newTheme);
            });
        }
    });
</script>
</body>
</html>